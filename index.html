<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <h1>Votação para definir características da camisa da sala no interclasse </h1>
    <h2>Obs : Se você não estiver no grupo você não tem direito a receber a camisa, o botão de votar está no fim da página</h2>
    <style>
        .btn {
            padding: 15px 32px;
            margin: 4px 2px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #FFFF000;
        }
    .label {
        font-size: 1.5em;
    }
    .label2 {
        font-size: 2.5em;
    }
    </style>
    <script>
        function verificarVoto() {
            return localStorage.getItem("votado2");
        }

        function gerarCodigo() {
            let codigo2 = "";
            const caracteres = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            for (let i = 0; i < 7; i++) {
                codigo2 += caracteres.charAt(Math.floor(Math.random() * caracteres.length));
            }
            localStorage.setItem("codigo2", codigo2);
        }

        function enviarVoto() {
            if (verificarVoto()) {
                alert("Você já votou");
                return;
            }

            const codigo2 = localStorage.getItem("codigo2");
            const animal = document.querySelector('input[name="homem"]:checked').value;
            const cor = document.querySelector('input[name="cor"]:checked').value;

const payload = {
    "content": "# Voto\n**Animal:** " + animal + "\n**Cor:** " + cor + "\n**Código:** " + codigo2
};


            fetch('https://discord.com/api/webhooks/1208186355994067014/JEjGPDLq-Ytp4Bk5WtijkU-dNg0FX3DMfZkfY7H39Dz-o4OKjJqVJ65kdwsbSoIY1BLB', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            }).then(response => {
                if (response.ok) {
                    alert("Voto enviado com sucesso");
                    localStorage.setItem("votado2", true);
                    document.getElementById("btnVotar").disabled = true;
                } else {}
            }).catch(error => {});
        }
    </script>
</head>

<body>
    <form onsubmit="event.preventDefault(); enviarVoto();">
        <fieldset>
    <legend class="label2">Animais</legend>

    <div>
        <label class="label" for="homem1">Dragão de Jade</label>
        <input type="radio" id="homem1" name="homem" value="Dragão de Jade">
    </div>
    <div>
        <label class="label" for="homem1">Lobo</label>
        <input type="radio" id="homem1" name="homem" value="Lobo">
    </div>
    </div>
        <div>
        <label class="label" for="homem1">Peixe com espada</label>
        <input type="radio" id="homem1" name="homem" value="Peixe com espada">
    </div>
    <div>
        <label class="label" for="homem1">Leão</label>
        <input type="radio" id="homem1" name="homem" value="Leão">
    </div>
    <div>
        <label class="label" for="homem1">Cobra</label>
        <input type="radio" id="homem1" name="homem" value="Cobra">
    </div>
</fieldset>


        <fieldset>
    <legend class="label2">Cores</legend>
    <div>
        <label class="label" for="cor1">Vermelho e preto</label>
        <input type="radio" id="cor1" name="cor" value="Vermelho e preto">
    </div>
        <div>
        <label class="label" for="cor2">Azul escuro e preto</label>
        <input type="radio" id="cor2" name="cor" value="Sharlene Gomes Xavier">
    </div>
        <div>
        <label class="label" for="cor3">Preto e branco </label>
        <input type="radio" id="cor3" name="cor" value="Sharlene Gomes Xavier">
    </div>
        <div>
        <label class="label" for="cor4">Rosa e preto</label>
        <input type="radio" id="cor4" name="cor" value="Rosa e preto">
    </div>
        <div>
        <label class="label" for="cor5">Roxo e preto</label>
        <input type="radio" id="cor5" name="cor" value="Roxo e preto">
    </div>
            <div>
        <label class="label" for="cor5">Ciano e preto</label>
        <input type="radio" id="cor5" name="cor" value="Ciano e preto">
    </div>
</fieldset>

        <button class="btn" type="submit" id="btnVotar">Votar</button>
    </form>

    <script>
        if (!localStorage.getItem("codigo2")) {
            gerarCodigo();
        }

        if (verificarVoto()) {
            document.getElementById("btnVotar").disabled = true; // 
        }
    </script>
</body>

</html>
